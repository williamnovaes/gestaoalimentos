<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:gs="http://java.sun.com/jsf/composite/components"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	template="#{pageContext.request.contextPath}/template/template.xhtml">

	<ui:param name="pagina" value="Cardápio" class="font-menu"/>
	<ui:param name="nomeUsuario" value="#{loginBean.usuarioLogado.nome}" />

	<ui:define name="content">

		<h:form id="homeForm" prependId="false">

			<div class="form">
				<h:outputLabel value="Produtos" styleClass="sr-only" />
			</div>

			<h:panelGroup>
				<h:outputText value="Nenhum Registro"
					styleClass="nenhum-registro"
					rendered="#{homeBean.produtos eq null 
								or empty homeBean.produtos}" />
								
				<h:panelGroup id="produtosPG"
					rendered="#{not empty homeBean.produtos}">
						
					<table class="nav nav-tabs">
						<tbody>
							<ui:repeat var="prod" value="#{homeBean.produtos}">
								<tr>
									<td>
										<h3>#{prod.nome}</h3>
<!-- 										<h:panelGroup rendered="#{not empty prod.tamanhos}"> -->
<!--  											<table> -->
<!--  												<tbody> --> 
<!-- 													<tr> --> 
<!-- 														<ui:repeat value="#{prod.tamanhos}" var="tam"> --> 
<!-- 															<td>#{tam.descricao}</td> --> 
<!-- 														</ui:repeat> --> 
<!-- 													</tr> --> 
<!-- 												</tbody> --> 
<!-- 											</table> --> 
<!--  										</h:panelGroup> --> 
<!-- 										<h:panelGroup rendered="#{not empty prod.produtoTipo.tamanhos}"> -->
<!-- 											<table> -->
<!-- 												<tbody> -->
<!-- 													<tr> -->
<!-- 														<ui:repeat value="#{prod.produtoTipo.tamanhos}" var="tam"> -->
<!-- 															<td>#{tam.descricao}</td> -->
<!-- 														</ui:repeat> -->
<!-- 													</tr> -->
<!-- 												</tbody> -->
<!-- 											</table> -->
<!-- 										</h:panelGroup> -->
											<div class="media">
												<ui:repeat var="sabor" value="#{prod.sabores}">
												 	<div class="media-body">
												 		<h4 class="media-heading">#{sabor.sequencia} #{sabor.descricao}</h4>
												 		<h:outputText value="#{sabor.listaIngredientes}" />
												 	</div>
												 	<div class="media-right media-middle">
												 		<h:commandLink disabled="#{!loginBean.aberto}"
															styleClass="glyphicon glyphicon-plus-sign media-object">
															<f:ajax event="click"
																render="DetalhesModalPG detalhesModal"
																listener="#{homeBean.adiconarSabor(sabor)}" />
														</h:commandLink>
												 	</div>
												</ui:repeat>
											</div>
<!-- 										<table> -->
<!-- 											<tbody> -->
<!-- 											<ui:repeat var="sabor" value="#{prod.sabores}"> -->
<!-- 												<tr> -->
<!-- 													<td> -->
<!-- 														<span style="font-weight: 800; font-size: 200%">#{sabor.sequencia}</span> -->
<!-- 														<h:commandLink disabled="#{!loginBean.aberto}" -->
<!-- 															styleClass="glyphicon glyphicon-plus-sign btn"> -->
<!-- 															<f:ajax event="click" -->
<!-- 																render="DetalhesModalPG detalhesModal" -->
<!-- 																listener="#{homeBean.adiconarSabor(sabor)}" /> -->
<!-- 														</h:commandLink> -->
<!-- 													</td> -->
<!-- 												</tr> -->
<!-- 											</ui:repeat> -->
<!-- 										</tbody> -->
<!-- 										</table> -->
									</td>
								</tr>
							</ui:repeat>
						</tbody>
					</table>
				</h:panelGroup>
			</h:panelGroup>
			
			<h:panelGroup id="detalhesModalPG">
				<gs:modal id="detalhesModal" 
					titulo="Detalhes - #{homeBean.produtoSelecionado.nome}"
					exibirModal="#{homeBean.exibirModalDetalhes}"
					fecharModal="#{homeBean.fecharModal()}"
					salvar="#{homeBean.adicionarSaber()}">
					
					<ul class="nav nav-tabs">
						<li role="presentation" class="active"><a
							href="#saboresDIV" data-toggle="tab">Sabores</a></li>
						<li role="presentation"><a href="#adicionaisDIV"
							data-toggle="tab">Adicionais</a></li>
					</ul>
					
					<div class="tab-content">
						<div id="saboresDIV" class="tab-pane fade in active">
							<div class="scroll">
								<h:dataTable id="saboresDT"
									var="item"
									styleClass="table table-striped table-hover"
									value="#{homeBean.saboresDisponiveis}">

									<h:column headerClass="text-center">
										<f:facet name="header">
											<div class="align-center">
												<h:outputText value="#{msg.txt_numero}" />
											</div>
										</f:facet>
										<h:selectBooleanCheckbox value="#{item.marcado}">
											<f:ajax render="" execute="@this"
												listener="#{homeBean.marcarSabor(item)}"/>
										</h:selectBooleanCheckbox>
									</h:column>
									
									<h:column headerClass="text-center">
										<f:facet name="header">
											<div class="align-center">
												<h:outputText value="#{msg.txt_nome}" />
											</div>
										</f:facet>
										<h:outputText value="#{item.nome}" />
									</h:column>
								</h:dataTable>
							</div>
						</div>
						
						<div id="adicionaisDIV" class="tab-pane fade">
							<div class="scroll">
								<h:dataTable id="ingredientesDT"
									var="item"
									styleClass="table table-striped table-hover"
									value="#{homeBean.adicionais}">

									<h:column headerClass="text-center">
										<f:facet name="header">
											<div class="align-center">
												<h:outputText value="#{msg.txt_numero}" />
											</div>
										</f:facet>
										<h:outputText value="#{item.sequencia}" />
									</h:column>
									
									<h:column headerClass="text-center">
										<f:facet name="header">
											<div class="align-center">
												<h:outputText value="#{msg.txt_nome}" />
											</div>
										</f:facet>
										<h:outputText value="#{item.nome}" />
									</h:column>
									
									<h:column headerClass="text-center">
										<f:facet name="header">
											<div class="align-center">
												<h:outputText value="#{msg.txt_quantidade}" />
											</div>
										</f:facet>
										<input type="number" disabled="#{item.quantidade ne 0}" 
											value="#{item.quantidade}" />
									</h:column>
								</h:dataTable>
							</div>
							
							<h:inputTextarea id="obsTA" rows="5" cols="6"
								maxlength="3"
								value="#{homeBean.observacao}"> 
							</h:inputTextarea>
						</div>
					</div>
				
				</gs:modal>
			
			</h:panelGroup>

			<!-- 			<h:panelGroup rendered="false"> -->
			<!-- 				<h:panelGroup id="produtosTipoPG" -->
			<!-- 					rendered="#{not empty homeBean.produtosTipo}"> -->

			<!-- 					<ul class="nav nav-tabs"> -->
			<!-- 						<ui:repeat var="tipo" value="#{homeBean.produtosTipo}"> -->
			<!-- 							<li role="presentation" -->
			<!-- 								class="#{homeBean.isAbaAtiva(tipo.id) ? 'active' : ''}"><h:commandLink -->
			<!-- 									value="#{tipo.descricao}" data-toggle="tab"> -->
			<!-- 									<f:ajax listener="#{homeBean.carregarProdutosPorTipo(tipo.id)}" -->
			<!-- 										render="produtosTipoPG" /> -->
			<!-- 								</h:commandLink> 								<a href="#{'#'.concat(item.descricao).concat('DIV')}" -->
			<!-- 																	data-toggle="tab" onclick="#{homeBean.carregarProdutosPorTipo(item.id)}"> -->
			<!-- 																	#{tipo.descricao} </a></li> -->
			<!-- 						</ui:repeat> -->
			<!-- 					</ul> -->

			<!-- 					<div class="tab-content"> -->
			<!-- 						<ui:repeat var="prod" value="#{homeBean.produtos}"> -->

			<!-- 						</ui:repeat>						 -->
			<!-- 					</div> -->

			<!-- 				</h:panelGroup> -->
			<!-- 			</h:panelGroup> -->

			<!-- 			<div id="float-banner" class="float-banner" data-spy="affix" data-offset-top="197"> -->
			<!-- 				teste baner flutuante -->
			<!-- 			</div> -->



			<!-- 			<h:panelGroup rendered="#{empty homeBean.extratos}"> -->
			<!-- 				<h:outputText value="Não há pedidos até o momento!" /> -->
			<!-- 			</h:panelGroup> -->

			<!-- 			<h:panelGroup rendered="#{not empty homeBean.extratos}"> -->

			<!-- 				<div class="scroll-horizontal"> -->
			<!-- 					<h:dataTable id="extratoDT" value="#{homeBean.extratos}" -->
			<!-- 						columnClasses=",align-center,align-center,align-center,align-center,align-center,align-center" -->
			<!-- 						styleClass="table" var="item"> -->

			<!-- 						<h:column> -->
			<!-- 							<f:facet name="header"> -->
			<!-- 								<h:outputText value="Guichê" /> -->
			<!-- 							</f:facet> -->
			<!-- 							<h:outputText value="#{item.nome}" /> -->
			<!-- 						</h:column> -->

			<!-- 						<h:column> -->
			<!-- 							<f:facet name="header"> -->
			<!-- 								<div class="align-center"> -->
			<!-- 									<h:outputText value="Qtd" /> -->
			<!-- 								</div> -->
			<!-- 							</f:facet> -->
			<!-- 							<h:outputText value="#{item.quantidade}" /> -->

			<!-- 							<f:facet name="footer"> -->
			<!-- 								<div class="align-center"> -->
			<!-- 									<strong> <h:outputText -->
			<!-- 											value="#{homeBean.extratoEventoTotal.quantidade}" /> -->
			<!-- 									</strong> -->
			<!-- 								</div> -->
			<!-- 							</f:facet> -->
			<!-- 						</h:column> -->

			<!-- 						<h:column> -->
			<!-- 							<f:facet name="header"> -->
			<!-- 								<div class="align-center"> -->
			<!-- 									<h:outputText value="Valor" /> -->
			<!-- 								</div> -->
			<!-- 							</f:facet> -->

			<!-- 							<h:outputText value="#{item.valorTotal}" -->
			<!-- 								converter="br.com.nx.tickets.converter.OutputMoedaConverter" /> -->

			<!-- 							<f:facet name="footer"> -->
			<!-- 								<div class="align-center"> -->
			<!-- 									<strong> <h:outputText -->
			<!-- 											value="#{homeBean.extratoEventoTotal.valorTotal}" -->
			<!-- 											converter="br.com.nx.tickets.converter.OutputMoedaConverter" /> -->
			<!-- 									</strong> -->
			<!-- 								</div> -->
			<!-- 							</f:facet> -->
			<!-- 						</h:column> -->

			<!-- 						<h:column> -->
			<!-- 							<f:facet name="header"> -->
			<!-- 								<div class="align-center"> -->
			<!-- 									<h:outputText value="Taxa" /> -->
			<!-- 								</div> -->
			<!-- 							</f:facet> -->

			<!-- 							<h:outputText value="#{item.valorTotalTaxaAdministrativa}" -->
			<!-- 								converter="br.com.nx.tickets.converter.OutputMoedaConverter" /> -->

			<!-- 							<f:facet name="footer"> -->
			<!-- 								<div class="align-center"> -->
			<!-- 									<strong> <h:outputText -->
			<!-- 											value="#{homeBean.extratoEventoTotal.valorTotalTaxaAdministrativa}" -->
			<!-- 											converter="br.com.nx.tickets.converter.OutputMoedaConverter" /> -->
			<!-- 									</strong> -->
			<!-- 								</div> -->
			<!-- 							</f:facet> -->
			<!-- 						</h:column> -->
			<!-- 						<h:column> -->
			<!-- 							<f:facet name="header"> -->
			<!-- 								<div class="align-center"> -->
			<!-- 									<h:outputText value="Total" /> -->
			<!-- 								</div> -->
			<!-- 							</f:facet> -->

			<!-- 							<h:outputText value="#{item.total}" -->
			<!-- 								converter="br.com.nx.tickets.converter.OutputMoedaConverter" /> -->

			<!-- 							<f:facet name="footer"> -->
			<!-- 								<div class="align-center"> -->
			<!-- 									<strong> <h:outputText -->
			<!-- 											value="#{homeBean.extratoEventoTotal.total}" -->
			<!-- 											converter="br.com.nx.tickets.converter.OutputMoedaConverter" /> -->
			<!-- 									</strong> -->
			<!-- 								</div> -->
			<!-- 							</f:facet> -->
			<!-- 						</h:column> -->

			<!-- 						<h:column> -->
			<!-- 							<f:facet name="header"> -->
			<!-- 								<div class="align-center"> -->
			<!-- 									<h:outputText value="Disponível" /> -->
			<!-- 								</div> -->
			<!-- 							</f:facet> -->

			<!-- 							<h:outputText value="#{item.totalRetirada}" -->
			<!-- 								converter="br.com.nx.tickets.converter.OutputMoedaConverter" /> -->

			<!-- 							<f:facet name="footer"> -->
			<!-- 								<div class="align-center"> -->
			<!-- 									<strong> <h:outputText -->
			<!-- 											value="#{homeBean.extratoEventoTotal.totalRetirada}" -->
			<!-- 											converter="br.com.nx.tickets.converter.OutputMoedaConverter" /> -->
			<!-- 									</strong> -->
			<!-- 								</div> -->
			<!-- 							</f:facet> -->
			<!-- 						</h:column> -->

			<!-- 						<h:column> -->
			<!-- 							<f:facet name="header"> -->
			<!-- 								<div class="align-center"> -->
			<!-- 									<h:outputText value="#{msg.txt_opcoes}" /> -->
			<!-- 								</div> -->
			<!-- 							</f:facet> -->
			<!-- 							<h:commandLink> -->
			<!-- 								<img src="../resources/images/ico/16x16/basket.png" -->
			<!-- 									title="Ver detalhes" /> -->
			<!-- 								<f:ajax execute="@this" render="extratoPG" -->
			<!-- 									listener="#{homeBean.detalharGuiche(item.id)}" /> -->
			<!-- 							</h:commandLink> -->
			<!-- 							<f:facet name="footer"> -->
			<!-- 								<div class="align-center"> -->
			<!-- 									<h:commandLink> -->
			<!-- 										<img src="../resources/images/ico/16x16/basket.png" -->
			<!-- 											title="Ver detalhes" /> -->
			<!-- 										<f:ajax execute="@this" render="extratoPG" -->
			<!-- 											listener="#{homeBean.detalharGuiche(0)}" /> -->
			<!-- 									</h:commandLink> -->
			<!-- 								</div> -->
			<!-- 							</f:facet> -->
			<!-- 						</h:column> -->

			<!-- 					</h:dataTable> -->
			<!-- 				</div> -->
			<!-- 			</h:panelGroup> -->

			<div class="row wrap-btn-form">
				<div class="col-sm-24">
					<!-- 					<h:commandLink styleClass="btn btn-success btn-block" -->
					<!-- 						action="#{homeBean.buscarExtrato}"> -->
					<!-- 						Atualizar -->
					<!-- 					</h:commandLink> -->
				</div>
			</div>

			<!-- 			<h:panelGroup id="extratoPG"> -->
			<!-- 				<gs:modal id="extratoModal" -->
			<!-- 					titulo="Extrato - #{homeBean.guiche.descricao}" -->
			<!-- 					exibirModal="#{homeBean.exibirExtratoModal}" -->
			<!-- 					fecharModal="#{homeBean.fecharModal()}" -->
			<!-- 					render="extratoPG"> -->

			<!-- 					<div class="scroll"> -->
			<!-- 						<gs:extratoTable bean="#{homeBean}" -->
			<!-- 							total="#{homeBean.extratoGuiche}" /> -->
			<!-- 					</div> -->

			<!-- 					<h:panelGroup id="historicoPG" rendered="#{homeBean.guiche ne null}"> -->

			<!-- 						<h4> -->
			<!-- 							<h:outputText value="Histórico de Retiradas" /> -->
			<!-- 						</h4> -->

			<!-- 						<div class="margin-bottom-40"> -->
			<!-- 							<h:panelGroup -->
			<!-- 								rendered="#{empty homeBean.extratoRetirada.retiradas}"> -->
			<!-- 								Não há retiradas! -->
			<!-- 							</h:panelGroup> -->

			<!-- 							<h:dataTable var="retirada" styleClass="table" -->
			<!-- 								value="#{homeBean.extratoRetirada.retiradas}" -->
			<!-- 								rendered="#{not empty homeBean.extratoRetirada.retiradas}" -->
			<!-- 								columnClasses=",align-center,align-center"> -->

			<!-- 								<h:column> -->
			<!-- 									<f:facet name="header"> -->
			<!-- 										<h:outputText value="Usuário" /> -->
			<!-- 									</f:facet> -->
			<!-- 									<gs:abreviado value="#{retirada.usuario.nome}" /> -->
			<!-- 								</h:column> -->

			<!-- 								<h:column> -->
			<!-- 									<f:facet name="header"> -->
			<!-- 										<div class="align-center"> -->
			<!-- 											<h:outputText value="Data da Retirada" /> -->
			<!-- 										</div> -->
			<!-- 									</f:facet> -->

			<!-- 									<gs:outputCalendar value="#{retirada.dataCadastro.time}" /> -->
			<!-- 								</h:column> -->

			<!-- 								<h:column> -->
			<!-- 									<f:facet name="header"> -->
			<!-- 										<div class="align-center"> -->
			<!-- 											<h:outputText value="Valor" /> -->
			<!-- 										</div> -->
			<!-- 									</f:facet> -->

			<!-- 									<h:outputText value="#{retirada.valor}" -->
			<!-- 										converter="br.com.nx.tickets.converter.OutputMoedaConverter" /> -->

			<!-- 									<f:facet name="footer"> -->
			<!-- 										<div class="align-center"> -->
			<!-- 											<strong> <h:outputText -->
			<!-- 													value="#{homeBean.extratoRetirada.saldoRetirada}" -->
			<!-- 													converter="br.com.nx.tickets.converter.OutputMoedaConverter" /> -->
			<!-- 											</strong> -->
			<!-- 										</div> -->
			<!-- 									</f:facet> -->
			<!-- 								</h:column> -->
			<!-- 							</h:dataTable> -->
			<!-- 						</div> -->

			<!-- 						<div class="row"> -->
			<!-- 							<div class="col-sm-12 col-sm-offset-12 wrap-extrato-pdv"> -->
			<!-- 								<p> -->
			<!-- 									<span><h:outputText value="Total" /></span> <strong> -->
			<!-- 										<h:outputText -->
			<!-- 											value="#{homeBean.extratoRetirada.total + homeBean.extratoRetirada.totalTaxaAdministrativa}" -->
			<!-- 											converter="br.com.nx.tickets.converter.OutputMoedaConverter" /> -->
			<!-- 									</strong> -->
			<!-- 								</p> -->

			<!-- 								<p> -->
			<!-- 									<span><h:outputText value="Disponível" /></span> <strong> -->
			<!-- 										<h:outputText -->
			<!-- 											value="#{homeBean.extratoRetirada.saldoDisponivel + 0}" -->
			<!-- 											converter="br.com.nx.tickets.converter.OutputMoedaConverter" /> -->
			<!-- 									</strong> -->
			<!-- 								</p> -->
			<!-- 							</div> -->
			<!-- 						</div> -->

			<!-- 						<div class="row"> -->
			<!-- 							<div class="col-sm-12 col-sm-offset-12"> -->
			<!-- 								<div class="input-group"> -->
			<!-- 									<span class="input-group-addon">R$</span> -->

			<!-- 									<h:inputText id="valorRetiradaIT" -->
			<!-- 										value="#{homeBean.valorRetirada}" -->
			<!-- 										styleClass="form-control text-right moeda" -->
			<!-- 										pt:placeholder="0,00"> -->
			<!-- 										<f:converter -->
			<!-- 											converterId="br.com.nx.tickets.converter.InputMoedaConverter" /> -->
			<!-- 									</h:inputText> -->

			<!-- 									<div class="input-group-btn"> -->
			<!-- 										<h:commandButton value="Efetuar Retirada" -->
			<!-- 											onclick="return confirm('Deseja realmente efetuar a retirada?')" -->
			<!-- 											styleClass="btn btn-default btn-success"> -->
			<!-- 											<f:ajax execute="valorRetiradaIT" event="click" -->
			<!-- 												render="historicoPG valorRetiradaIT retiradaMessages" -->
			<!-- 												listener="#{homeBean.salvarRetirada()}"></f:ajax> -->
			<!-- 										</h:commandButton> -->
			<!-- 									</div> -->
			<!-- 								</div> -->
			<!-- 							</div> -->
			<!-- 						</div> -->
			<!-- 						<h:messages id="retiradaMessages" -->
			<!-- 						layout="table" /> -->
			<!-- 					</h:panelGroup> -->

			<!-- 				</gs:modal> -->
			<!-- 			</h:panelGroup> -->
		</h:form>
	</ui:define>
</ui:composition>
